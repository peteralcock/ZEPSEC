class ChangeVulnerabilityVulnFeedType < ActiveRecord::Migration[5.1]
  disable_ddl_transaction!

  def change
    reversible do |change|
      change.up do
        execute <<-SQL
          ALTER TYPE vuln_feed
          ADD VALUE 'bdu'
          AFTER 'nvd';
        SQL
      end

      change.down do
        execute <<-SQL
          DELETE FROM pg_enum
          WHERE enumlabel = 'bdu'
          AND enumtypid = (
            SELECT oid FROM pg_type WHERE typname = 'vuln_feed'
          )
        SQL
      end
    end
  end
end
